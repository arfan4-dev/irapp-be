# Is workflow ka naam
name: Deploy Backend to EC2

# Yeh workflow kab chalega
on:
  # Jab 'master' branch par code push kiya jaye
push:
branches:
- master

# Is workflow mein kiye jane wale kaam(jobs)
jobs:
  # Sirf ek job hai jiska naam 'deploy' hai
deploy:
    # Is job ko kahan chalana hai ? Hamare apne server par.
    runs - on: self - hosted

    # Is job ke steps
steps:
      # Step 1: Code ko server par checkout karna
      # 'actions/checkout' ek pre - made action hai jo code ko server par lata hai
      # Lekin hamara code server par pehle se hai, isliye hum sirf pull karenge.
      # Phir bhi, yeh step runner ko sahi context dene ke liye zaroori hai.
      - name: Checkout Code
uses: actions / checkout@v4

      # Step 2: Node.js ka environment set karna(optional lekin a a hai)
      # Yeh step yaqeen dilata hai ke runner sahi Node.js version istemal kar raha hai
    - name: Setup Node.js
uses: actions / setup - node@v4
with:
node - version: '20.x' # Wahi version use karein jo aapke server par hai
cache: 'npm'

      # Step 3: Hamari deployment script ko chalana
      # Yeh woh script hai jo humne Step 2 mein server par banayi thi
    - name: Run Deployment Script
run: ./ deploy.sh